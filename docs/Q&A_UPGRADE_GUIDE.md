# Q&A μ‹μ¤ν… μ—…κ·Έλ μ΄λ“ κ°€μ΄λ“

## π€ M1 Mac μ¶”μ² LLM λ¨λΈλ“¤

### 1. **Phi-3.5 3.8B** (κ°€μ¥ μ¶”μ²)

```bash
# λ‹¤μ΄λ΅λ“
ollama pull phi3.5:3.8b

# νΉμ§•
- 3.8B νλΌλ―Έν„° (λ§¤μ° κ°€λ²Όμ›€)
- λΉ λ¥Έ μ‘λ‹µ μ†λ„
- λ©”λ¨λ¦¬ μ‚¬μ©λ‰: ~2GB
- ν•κµ­μ–΄ μ„±λ¥ μ–‘νΈ
```

### 2. **Llama 3.1 8B** (κ³ μ„±λ¥)

```bash
# λ‹¤μ΄λ΅λ“
ollama pull llama3.1:8b

# νΉμ§•
- 8B νλΌλ―Έν„°
- λ†’μ€ ν’μ§μ λ‹µλ³€
- λ©”λ¨λ¦¬ μ‚¬μ©λ‰: ~4GB
- ν•κµ­μ–΄ μ„±λ¥ μ°μ
```

### 3. **Qwen2.5 7B** (ν•κµ­μ–΄ νΉν™”)

```bash
# λ‹¤μ΄λ΅λ“
ollama pull qwen2.5:7b

# νΉμ§•
- 7B νλΌλ―Έν„°
- ν•κµ­μ–΄ μ„±λ¥ λ§¤μ° μ°μ
- λ©”λ¨λ¦¬ μ‚¬μ©λ‰: ~3.5GB
```

### 4. **SOLAR 10.7B** (μµκ³  ν’μ§)

```bash
# λ‹¤μ΄λ΅λ“
ollama pull solar:10.7b

# νΉμ§•
- 10.7B νλΌλ―Έν„°
- ν•κµ­μ–΄ μ„±λ¥ μµκ³ 
- λ©”λ¨λ¦¬ μ‚¬μ©λ‰: ~5GB
```

## π”§ Q&A μ‹μ¤ν… κµ¬μ„± μ”μ†

### 1. **RAG (Retrieval-Augmented Generation)**

- **κ²€μƒ‰ (Retrieval)**: κ΄€λ ¨ λ¬Έμ„ μ²­ν¬ κ²€μƒ‰
- **μƒμ„± (Generation)**: LLMμ„ μ‚¬μ©ν• λ‹µλ³€ μƒμ„±
- **κ²°ν•©**: κ²€μƒ‰λ μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ μ •ν™•ν• λ‹µλ³€

### 2. **κµ¬ν„λ κΈ°λ¥λ“¤**

#### A. Q&A μ„λΉ„μ¤ (`src/qa_service.py`)

```python
# μ£Όμ” κΈ°λ¥
- ask_question(): μ§λ¬Έμ— λ€ν• λ‹µλ³€ μƒμ„±
- ask_with_metadata(): λ©”νƒ€λ°μ΄ν„° ν¬ν•¨ μƒμ„Έ λ¶„μ„
- generate_answer(): LLMμ„ μ‚¬μ©ν• λ‹µλ³€ μƒμ„±
- test_llm_connection(): LLM μ—°κ²° ν…μ¤νΈ
```

#### B. API μ—”λ“ν¬μΈνΈ

```python
# μƒλ΅μ΄ μ—”λ“ν¬μΈνΈλ“¤
POST /api/v1/qa          # Q&A μ§λ¬Έ μ²λ¦¬
GET  /api/v1/qa/models   # μ‚¬μ© κ°€λ¥ν• λ¨λΈ λ©λ΅
GET  /api/v1/qa/test     # Q&A μ„λΉ„μ¤ ν…μ¤νΈ
```

#### C. Pydantic λ¨λΈ

```python
# μ”μ²­/μ‘λ‹µ λ¨λΈ
QARequest: μ§λ¬Έ μ”μ²­ λ¨λΈ
QAResponse: λ‹µλ³€ μ‘λ‹µ λ¨λΈ
```

## π“ ν„μ¬ μ‹μ¤ν… μƒνƒ

### β… **μ‘λ™ν•λ” λ¶€λ¶„**

- β… **κ²€μƒ‰ κΈ°λ¥**: κ΄€λ ¨ λ¬Έμ„ μ²­ν¬ κ²€μƒ‰
- β… **LLM μ—°κ²°**: Phi-3.5 λ¨λΈ μ—°κ²°
- β… **API μ—”λ“ν¬μΈνΈ**: Q&A API κµ¬ν„
- β… **λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤**: Qdrant μ—°λ™

### β οΈ **κ°μ„  ν•„μ”ν• λ¶€λ¶„**

- β οΈ **μ‘λ‹µ μ‹κ°„**: LLM μ‘λ‹µμ΄ λλ¦Ό (νƒ€μ„μ•„μ›ƒ)
- β οΈ **λ¨λΈ μ„ νƒ**: λ” μ ν•©ν• λ¨λΈ ν•„μ”
- β οΈ **ν”„λ΅¬ν”„νΈ μµμ ν™”**: λ” λ‚μ€ ν”„λ΅¬ν”„νΈ ν•„μ”

## π― μ‚¬μ© λ°©λ²•

### 1. **API μ‚¬μ©**

```bash
# Q&A μ§λ¬Έ
curl -X POST "http://localhost:8001/api/v1/qa" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "μ΄μμΆ‹μ€λ‚ μ— λ‚μ¤λ” λ“±μ¥μΈλ¬Ό μ΄λ¦„λ“¤μ€?",
    "max_results": 5,
    "max_tokens": 300,
    "include_metadata": true
  }'
```

### 2. **Python μ§μ ‘ μ‚¬μ©**

```python
from src.qa_service import QAService

qa_service = QAService()
result = qa_service.ask_question("κΉ€μ²¨μ§€λ” μ–΄λ–¤ μ§μ—…μ„ κ°€μ§€κ³  μλ‚μ”?")
print(result['answer'])
```

### 3. **μ›Ή μΈν„°νμ΄μ¤**

```
http://localhost:8001/docs  # API λ¬Έμ„
```

## π”§ μ„±λ¥ μµμ ν™” λ°©μ•

### 1. **λ¨λΈ μµμ ν™”**

```python
# λ” κ°€λ²Όμ΄ λ¨λΈ μ‚¬μ©
self.llm_model = "phi3.5:3.8b"  # ν„μ¬ μ‚¬μ© μ¤‘
# λλ”
self.llm_model = "gemma3:latest"  # λ€μ•
```

### 2. **ν”„λ΅¬ν”„νΈ μµμ ν™”**

```python
def _build_prompt(self, query: str, context: List[str]) -> str:
    context_text = "\n\n".join(context)

    prompt = f"""λ‹¤μμ€ λ¬Έμ„μ—μ„ κ²€μƒ‰λ κ΄€λ ¨ λ‚΄μ©μ…λ‹λ‹¤:

{context_text}

μ„μ λ‚΄μ©μ„ λ°”νƒ•μΌλ΅ λ‹¤μ μ§λ¬Έμ— κ°„κ²°ν•κ³  μ •ν™•ν•κ² λ‹µλ³€ν•΄μ£Όμ„Έμ”:

μ§λ¬Έ: {query}

λ‹µλ³€:"""

    return prompt
```

### 3. **νƒ€μ„μ•„μ›ƒ μ„¤μ •**

```python
# λ” κΈ΄ νƒ€μ„μ•„μ›ƒ μ„¤μ •
timeout=120  # 2λ¶„
```

### 4. **μΊμ‹± κµ¬ν„**

```python
# κ²€μƒ‰ κ²°κ³Ό μΊμ‹±
@lru_cache(maxsize=100)
def cached_search(self, query: str, limit: int):
    return self.search_service.search(query, limit)
```

## π“ μ„±λ¥ λ¨λ‹ν„°λ§

### 1. **μ‘λ‹µ μ‹κ°„ μΈ΅μ •**

```python
import time

start_time = time.time()
result = qa_service.ask_question(question)
processing_time = time.time() - start_time
print(f"μ²λ¦¬ μ‹κ°„: {processing_time:.2f}μ΄")
```

### 2. **κ²€μƒ‰ ν’μ§ ν‰κ°€**

```python
# κ²€μƒ‰ κ²°κ³Ό μ μ ν™•μΈ
for result in search_results:
    score = result.get('score', 0)
    print(f"κ²€μƒ‰ μ μ: {score:.4f}")
```

### 3. **LLM μ‘λ‹µ ν’μ§**

```python
# λ‹µλ³€ κΈΈμ΄ λ° ν’μ§ ν™•μΈ
answer = result.get('answer', '')
print(f"λ‹µλ³€ κΈΈμ΄: {len(answer)}μ")
print(f"λ‹µλ³€ ν’μ§: {'μΆ‹μ' if len(answer) > 50 else 'λ¶€μ΅±'}")
```

## π€ λ‹¤μ λ‹¨κ³„

### 1. **μ¦‰μ‹ κ°μ„  κ°€λ¥**

- [ ] λ” κ°€λ²Όμ΄ λ¨λΈ ν…μ¤νΈ (gemma3)
- [ ] ν”„λ΅¬ν”„νΈ μµμ ν™”
- [ ] νƒ€μ„μ•„μ›ƒ μ„¤μ • μ΅°μ •
- [ ] μ—λ¬ ν•Έλ“¤λ§ κ°μ„ 

### 2. **κ³ κΈ‰ κΈ°λ¥**

- [ ] μ¤νΈλ¦¬λ° μ‘λ‹µ
- [ ] λ€ν™” νμ¤ν† λ¦¬
- [ ] λ©€ν‹° λ¬Έμ„ μ§€μ›
- [ ] λ‹µλ³€ ν’μ§ ν‰κ°€

### 3. **μ‚¬μ©μ μΈν„°νμ΄μ¤**

- [ ] μ›Ή μ±„ν… μΈν„°νμ΄μ¤
- [ ] λ¨λ°”μΌ μ•±
- [ ] Slack/Discord λ΄‡

## π“ ν…μ¤νΈ κ²°κ³Ό

### ν„μ¬ ν…μ¤νΈ κ²°κ³Ό

```
π” μ§λ¬Έ: μ΄μμΆ‹μ€λ‚ μ— λ‚μ¤λ” λ“±μ¥μΈλ¬Ό μ΄λ¦„λ“¤μ€?
π“ κ²€μƒ‰ κ²°κ³Ό: 5κ° β…
π“‹ μ»¨ν…μ¤νΈ: 5κ° β…
π’΅ λ‹µλ³€: νƒ€μ„μ•„μ›ƒ β οΈ

π” μ§λ¬Έ: κΉ€μ²¨μ§€λ” μ–΄λ–¤ μ§μ—…μ„ κ°€μ§€κ³  μλ‚μ”?
π“ κ²€μƒ‰ κ²°κ³Ό: 5κ° β…
π“‹ μ»¨ν…μ¤νΈ: 5κ° β…
π’΅ λ‹µλ³€: νƒ€μ„μ•„μ›ƒ β οΈ
```

### κ°μ„  λ°©ν–¥

1. **λ¨λΈ λ³€κ²½**: Phi-3.5 β†’ Gemma3
2. **νƒ€μ„μ•„μ›ƒ μ¦κ°€**: 60μ΄ β†’ 120μ΄
3. **ν”„λ΅¬ν”„νΈ λ‹¨μν™”**: λ” κ°„λ‹¨ν• ν”„λ΅¬ν”„νΈ μ‚¬μ©
4. **λ°°μΉ μ²λ¦¬**: μ—¬λ¬ μ§λ¬Έμ„ ν• λ²μ— μ²λ¦¬

μ΄μ  Q&A μ‹μ¤ν…μ κΈ°λ³Έ κµ¬μ΅°κ°€ μ™„μ„±λμ—μµλ‹λ‹¤! π‰
